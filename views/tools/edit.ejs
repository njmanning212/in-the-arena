<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<main>

  <section>
    <h1><%= title %></h1>
    <form action="/tools/<%= tool._id %>?_method=PUT" method="POST">
      <div>
        <div>
          <label for="name">Name</label>
          <input type="text" name="name" id="name" value="<%= tool.name %>" autocomplete="off"/>
      </div>
      <div>
          <label for="instructions">Instructions</label>
          <textarea type="text" name="instructions" id="instructions" maxlength="1500"><%= tool.instructions %></textarea>
          1500 char max
      </div>
      <div>
          <label for="imgSrc"> Link To Image</label>
          <input type="text" name="imgSrc" id="imgSrc" value="<%= tool.imgSrc %>">
      </div>
      <div>
          <label for="imgOwner"> Image Owner Name </label>
          <input type="text" name="imgOwner" id="imgAttribution" value="<%= tool.imgOwner %>">
      </div>
      <div>
          <label for="imgOwnerLink"> Link to Owner of Image</label>
          <input type="text" name="imgOwnerLink" id="imgOwnerLink" value="<%= tool.imgOwnerLink %>">
      <div>
          <label for="difficulty">Difficulty to Perform (0-10)</label>
          <select name="difficulty" id="difficulty">
            <option value="<%= tool.difficulty %>"><%= tool.difficulty %></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
      </div>
      <div>
          <label for="toolTypeId">Tool Type</label>
          <select name="type" id="toolTypeId">
            <option value="<%= tool.type._id %>"><%= tool.type.name %></option>
            <% toolTypes.forEach(toolType => { %>
              <option value="<%= toolType._id %>"><%= toolType.name %></option>
            <% }) %>
          </select>
      </div>
      <div>
        <% if (tool.author.equals(user?.profile._id)) { %>
          <button type="submit">Update Tool</button>
        <% } %>
      </div>
    </form>
  </section>

</main>


<% if (blankError) { %>
  <div>
    <h2>Please don't leave any fields blank</h2>
  </div>
<% } %>
<% if (duplicateError) { %>
  <div>
    <h2>That tool type already exists</h2>
  </div>
<% } %>
</main>

<%- include('../partials/footer') %>